<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title></title>
    <script>
        if (/index.php/.test(location.href)) location.href = location.href.replace(/index\.php/, "");
    </script>
    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="176" />
    <meta name="HandheldFriendly" content="True" />
    <link rel="shortcut icon" href="favicon.ico?1" type="image/x-icon">
    <link rel="icon" type="image/png" href="images/favicon.png?1" sizes="16x16">
    <link rel="icon" type="image/png" href="images/favicon_2x.png?1" sizes="32x32">
    <link href="css/quill.core.min.css" rel="stylesheet">
    <link href="css/core.min.css?44" rel="stylesheet">
    <link href="css/jquery.fancybox.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery.selection.min.js"></script>
    <script src="js/autosize.min.js"></script>
    <script src="js/load-image.all.min.js?1"></script>
    <script src="js/quill.min.js?9"></script>
    <style>
        .card {
            padding-top: 10px;
            position: relative;
            display: -webkit-box;
            display: -ms-flexbox;
            display: flex;
            -webkit-box-orient: vertical;
            -webkit-box-direction: normal;
            -ms-flex-direction: column;
            flex-direction: column;
            min-width: 0;
            word-wrap: break-word;
            background-color: #fff;
            background-clip: border-box;
            border: 1px solid rgba(0, 0, 0, .125);
            border-radius: .25rem;
            white-space: nowrap;
        }

        .card p {
            margin-bottom: 5px !important;
        }

        #_tl_view .header {
            background: #FFF;
            padding: 0px;
            margin-top: 0px !important;

        }



        /* Page content */
        .content {}

        /* The sticky class is added to the header with JS when it reaches its scroll position */
        .sticky {
            position: fixed;
            top: 0;
            z-index: 1000;
            padding-bottom: 14px;
            max-width: 732px;
        }

        #mirror_links {
            padding-top: 0px; 
            text-align: center;
            width: 100%;
            color: #999;
            z-index: 1000;
        }

        #mirror_links a:link, #mirror_links a:active {

            color: #AAA; 
            text-decoration: none !important;
            border-bottom-style: none;          
        }
        
        #tab-links {
            padding-top: 20px;
            padding-left: 10%;
        }

        #tab-links a:link {
            color: #000; 
            text-decoration: none !important;
            border-bottom-style: none;          
        }
        
        #tab-links a:hover {
            color: #000; 
            text-decoration: none !important;
            border-bottom: 2px solid #000;          
        }
        
    </style>
</head>

<body>
   <!----><div id="tab-links"><a href="?about-us" class="button publish_button"> About Us</a>&nbsp;&nbsp;&nbsp;&nbsp;<a href="?rules" class="button publish_button">&#9733; Rules</a></div><!---->
   <div id="mirror_links">
   <br />
   </div>

    <div class="tl_page_wrap">
        <div class="tl_page">

            <div class="tl_article">
                <div id="_tl_view" class="tl_article_content"></div>
            </div>

            <main class="tl_article">
                <header class="tl_article_header">
                    <h1 dir="auto"></h1>
                    <address dir="auto">
                        <a rel="author"></a>
                        <!--
           --><time datetime=""></time>
                    </address>
                </header>

                <article id="_tl_editor" class="tl_article_content">
                    <h1><br></h1>
                    <address><br></address>
                    <p><br></p>
                </article>

                <div id="_tl_link_tooltip" class="tl_link_tooltip"></div>
                <div id="_tl_tooltip" class="tl_tooltip">
                    <div class="buttons">
                        <span class="button_hover"></span>
                        <span class="button_group">
                            <!--
             --><button id="_bold_button"></button>
                            <!--
             --><button id="_italic_button"></button>
                            <!--
             --><button id="_link_button"></button>
                            <!--
           --></span>
                        <!--
           --><span class="button_group">
                            <!--
             --><button id="_header_button"></button>
                            <!--
             --><button id="_subheader_button"></button>
                            <!--
             --><button id="_quote_button"></button>
                            <!--
           --></span>
                    </div>
                    <div class="prompt">
                        <span class="close"></span>
                        <div class="prompt_input_wrap"><input type="url" class="prompt_input" /></div>
                    </div>
                </div>
                <div id="_tl_blocks" class="tl_blocks">
                    <div class="buttons">
                        <button id="_image_button"></button>
                        <!--
           --><button id="_embed_button"></button>
                    </div>
                </div>
                <aside class="tl_article_buttons">
                    <div class="account account_top"></div>
                    <div class="account account_bottom"></div>
                    <div id="_error_msg" class="error_msg"></div>
                </aside>
            </main>

        </div>


    </div>
   

    <div id="_tl_alerts" class="tl_alerts"></div>
    <script type="text/javascript">
        var post_id = `1`;
        var user_id = `guest`;
        var post_links = "Error selecting record: " ;


        var baseUrl = location.href.replace(/index\.php/, ""); //$("base")[0].href;

        var source_content = (``);
        var post_views = ``;

        var fragments = [] ;

        var post_password = null ;
        var post_link = null ;

        var post_password_tmp = post_password;
        var post_link_tmp = post_link;
        var source_content_edit = ``;
        var post_attachments_list = '[{"src":"view.php?post_id=1&name=OC919ZXPTinQx6Pp.png","name":"blob"},{"src":"view.php?post_id=1&name=FHaB7AeDBKp4dmfK.png","name":"blob"}] ';

        function formatDate(unix) {
            var dt = new Date(unix * 1000);

            return `${
    (dt.getMonth()+1).toString().padStart(2, '0')}/${
    dt.getDate().toString().padStart(2, '0')}/${
    dt.getFullYear().toString().padStart(4, '0')} ${
    dt.getHours().toString().padStart(2, '0')}:${
    dt.getMinutes().toString().padStart(2, '0')}:${
    dt.getSeconds().toString().padStart(2, '0')}`;
        }

        function generateHtmlLinks() {

            //  console.log(JSON.stringify(post_links));
            var result = [];
            for (var i = 0; i < post_links.length; i++) {
                let post = post_links[i];
                result.push(`<div class="card">
    <p>
        <a style="font-weight: 700" href="?${post['link']}">${post['title']!=""?post['title']:"[no title]"}</a> 
    </p>
    ${post['info'] && post['info']!=''?'<p>' + post['info'] + '</p>':''}
    <p>
        <small>views: <span class="pageviews-wrapper"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792"><path d="M588.277,896v692.375H280.555V896H588.277z M1049.86,630.363v958.012h-307.72V630.363H1049.86z M1511.446,203.625v1384.75h-307.725V203.625H1511.446z"></path></svg>${post['views']}</span> ${post['password']!="0"?"<span class=\"badge\">protected</span>":""}</small>
    |
    <small>
    Published: ${formatDate(post['timestamp'])}
    </small>
    </p>
</div>`);
            }

            return "<div class='content'>" + result.join("<br />") + "</div>";
        }

        function addFancy() {

            var els = Array.from(document.querySelectorAll("#_tl_view img")).map(e => {

                var p = e.parentElement;

                var node_a = document.createElement("a");
                node_a.setAttribute("href", e.getAttribute("src"));
                node_a.setAttribute("data-fancybox", "gallery");
                p.insertBefore(node_a, e);

                node_a.appendChild(e);


            });
        }


        $(document).ready(function() {

            var html = $("#_tl_editor .ql-editor").html();
            for (var i = 0; i < fragments.length; i++) {
                //    console.log(new RegExp(fragments[i].pattern, "g"), fragments[i].replacement);
                html = html.replace(new RegExp(fragments[i].pattern, "g"), fragments[i].replacement);
            }

            html = html.replace(/::links/g, generateHtmlLinks());
            html = html.replace(/::views/g, `<span class="pageviews-wrapper"><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 1792 1792"><path d="M588.277,896v692.375H280.555V896H588.277z M1049.86,630.363v958.012h-307.72V630.363H1049.86z M1511.446,203.625v1384.75h-307.725V203.625H1511.446z"></path></svg>${post_views}</span>`);

            $("#_tl_view").html(html);
            addFancy();

            $("main").hide();
            $("#_tl_view").show();
            $("#_tl_view h1").show();
            if ($("#_tl_view address").text() != "") $("#_tl_view address").show();
            else $("#_tl_view address").hide();


            
            $("#_tl_view #WALL-OF-SHAME").before("<div class='header'></div>");
            $("#_tl_view .header").append($("#_tl_view #WALL-OF-SHAME, #_tl_view #WALL-OF-SHAME+*,#_tl_view #WALL-OF-SHAME+*+*"));

            // Get the header
            var header = document.querySelector('.header');
            var sticky = 370; //$('#WALL-OF-SHAME').offset().top;
            $("head").append('<style type="text/css"></style>');
            var newStyleElement = $("head").children(':last');
            newStyleElement.html(`
.sticky + * {
  padding-top: ${$( "#_tl_view .header" ).height()+18}px;
}`);

            window.onscroll = function() {
                myFunction()
            };

            function myFunction() {
                //console.log([window.pageYOffset , sticky, window.pageYOffset > sticky]);

                if (window.pageYOffset > sticky) {
                    header.classList.add("sticky");
                } else {
                    header.classList.remove("sticky");
                }
            }

        });
    </script>


    <script src="js/post-core.min.js?60"></script>
    <script src="js/jquery.fancybox.min.js"></script>

</body>

</html>